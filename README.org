* Ruby Dashboard Builder

[[http://al3xandr3.github.com/img/mydash1.png]]

[[http://al3xandr3.github.com/img/mydash2.png]]

#+BEGIN_HTML
<script charset='utf-8' src='https://ajax.googleapis.com/ajax/libs/jquery/1.6.0/jquery.min.js' type='text/javascript'></script>
<script charset='utf-8' src='http://www.highcharts.com/js/highcharts.js' type='text/javascript'></script>
<script charset='utf-8' src='https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.13/jquery-ui.min.js' type='text/javascript'></script>
<link href='https://ajax.googleapis.com/ajax/libs/jqueryui/1.7/themes/smoothness/jquery-ui.css' rel='stylesheet' type='text/css' />
<script charset='utf-8' src='http://autobahn.tablesorter.com/jquery.tablesorter.js' type='text/javascript'></script>
<link href='http://tablesorter.com/themes/blue/style.css' rel='stylesheet' type='text/css' />
<div class='container'>
  <div id='tabs'>
    <ul>
      <li>
        <a href='#tabs-1'>Plots</a>
      </li>
      <li>
        <a href='#tabs-2'>Table</a>
      </li>
    </ul>
    <div id='tabs-1'>
      <div id='mygraph'>
        
              <div id="Country Population" 
                style="height:px;width:px;"></div>
              <script type="text/javascript">
               var month = new Array("Jan","Feb","Mar","Apr","May","Jun",
                                     "Jul","Aug","Sept","Oct","Nov","Dec");
               var chart;
               $(document).ready(function() {
               chart = new Highcharts.Chart({
                  chart: {
                     renderTo: 'Country Population',
                     defaultSeriesType: 'line',
                     marginRight: 40,
                     marginBottom: 95
                  },
                  credits:{
                    enabled:false
                  },
                  plotOptions: {
                     line: {
                        dataLabels: {                  
                           enabled: false
                        }
                     }
                  },
                  title: {
                     text: 'Country Population',
                     x: -20 //center
                  },
                  subtitle: {
                     text: 'https://spreadsheets.google.com/ccc?key=phNtm3LmDZENoqUmTikF9DA#gid=10',
                     x: -20
                  },
                  xAxis: {
                     type: "datetime",
                     title: {
                        text: 'Year'
                     },
                  },
                  yAxis: {
                     
                     title: {
                        text: 'Population'
                     },
                  },
                  tooltip: {
                    formatter: function() {
                       return (new Date(this.x)).getDate() + ' ' +   
                              month[(new Date(this.x)).getMonth()] + ' ' +
                              (new Date(this.x)).getFullYear() + 
                               ': '+ this.y;
                     }
                  },
        
                  series: [{"pointInterval":31579200000.0,"pointStart":1262296800000,"name":"Portugal","visible":false,"data":[10676,10690,10699,10705,10705,10702,10694,10681,10665,10646,10623]},{"pointInterval":31579200000.0,"pointStart":1262296800000,"name":"Portugal Trend","visible":false,"data":[10707.90909090909,10702.436363636363,10696.963636363636,10691.490909090908,10686.01818181818,10680.545454545454,10675.072727272727,10669.599999999999,10664.127272727272,10658.654545454545,10653.181818181818]},{"pointInterval":31579200000.0,"pointStart":1262296800000,"name":"Estonia","visible":false,"data":[1341,1341,1340,1339,1338,1337,1336,1334,1333,1331,1329]},{"pointInterval":31579200000.0,"pointStart":1262296800000,"name":"United Kingdom","data":[62036,62417,62798,63177,63556,63935,64313,64688,65062,65433,65802]},{"pointInterval":31579200000.0,"pointStart":1262296800000,"name":"United States","data":[310384,313085,315791,318498,321197,323885,326560,329222,331868,334496,337102]}]        
                 });
                });
              </script>
      </div>
      <table>
        <thead>
          <tr>
            <th>Portugal</th>
            <th>10 years</th>
            <th>2020</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Portugal</td>
            <td>
              
                    <div id="pt_spark" 
                      style="height:25px;width:130px;"></div>
                    <script type="text/javascript">
                      var month = new Array("Jan","Feb","Mar","Apr","May","Jun",
                                            "Jul","Aug","Sept","Oct","Nov","Dec");
                     
                      var chart = new Highcharts.Chart({
                      chart: {
                          renderTo: 'pt_spark',
                          defaultSeriesType: 'area',
                          margin:[0,0,0,0],
                          //borderWidth:1
                      },
                      title:{
                          text:''
                      },
                      credits:{
                          enabled:false
                      },
                      xAxis: {
                          labels: {
                              enabled:false
                          }
                      },
                      yAxis: {
                          
                          min: 10623,
                          
                          maxPadding:0,
                          minPadding:0,
                          endOnTick:false,
                          labels: {
                              enabled:false
                          }
                      },
                      legend: {
                          enabled:false
                      },
                      tooltip: {
                           borderWidth: 1,
                           formatter: function() {
                             return (new Date(this.x)).getDate() + ' ' +   
                                    month[(new Date(this.x)).getMonth()] + ' ' +
                                    (new Date(this.x)).getFullYear() + 
                                     ': '+ this.y;
                           }
                        },
                      plotOptions: {
                          series:{
                              lineWidth:1,
                              shadow:false,
                              states:{
                                  hover:{
                                      lineWidth:1
                                  }
                              },
                              marker:{
                                  //enabled:false,
                                  radius:1,
                                  states:{
                                      hover:{
                                          radius:2
                                      }
                                  }
                              }
                          }
                      },
                      series: [{
                          color:'#666',
                          fillColor:'rgba(204,204,204,.25)',
                          pointInterval: 31579200000.0,
                          pointStart: 1262296800000,
                          data: [10676, 10690, 10699, 10705, 10705, 10702, 10694, 10681, 10665, 10646, 10623]        
                      }]
                    });
                    </script>
            </td>
            <td>
              10,623
            </td>
          </tr>
          <tr>
            <td>Estonia</td>
            <td>
              
                    <div id="ee_spark" 
                      style="height:25px;width:130px;"></div>
                    <script type="text/javascript">
                      var month = new Array("Jan","Feb","Mar","Apr","May","Jun",
                                            "Jul","Aug","Sept","Oct","Nov","Dec");
                     
                      var chart = new Highcharts.Chart({
                      chart: {
                          renderTo: 'ee_spark',
                          defaultSeriesType: 'area',
                          margin:[0,0,0,0],
                          //borderWidth:1
                      },
                      title:{
                          text:''
                      },
                      credits:{
                          enabled:false
                      },
                      xAxis: {
                          labels: {
                              enabled:false
                          }
                      },
                      yAxis: {
                          
                          min: 1329,
                          
                          maxPadding:0,
                          minPadding:0,
                          endOnTick:false,
                          labels: {
                              enabled:false
                          }
                      },
                      legend: {
                          enabled:false
                      },
                      tooltip: {
                           borderWidth: 1,
                           formatter: function() {
                             return (new Date(this.x)).getDate() + ' ' +   
                                    month[(new Date(this.x)).getMonth()] + ' ' +
                                    (new Date(this.x)).getFullYear() + 
                                     ': '+ this.y;
                           }
                        },
                      plotOptions: {
                          series:{
                              lineWidth:1,
                              shadow:false,
                              states:{
                                  hover:{
                                      lineWidth:1
                                  }
                              },
                              marker:{
                                  //enabled:false,
                                  radius:1,
                                  states:{
                                      hover:{
                                          radius:2
                                      }
                                  }
                              }
                          }
                      },
                      series: [{
                          color:'#666',
                          fillColor:'rgba(204,204,204,.25)',
                          pointInterval: 31579200000.0,
                          pointStart: 1262296800000,
                          data: [1341, 1341, 1340, 1339, 1338, 1337, 1336, 1334, 1333, 1331, 1329]        
                      }]
                    });
                    </script>
            </td>
            <td>
              1,329
            </td>
          </tr>
        </tbody>
      </table>
    </div>
    <div id='tabs-2'>
      <table class='tablesorter' id='ptpopulation'>
        <thead>
          <tr>
            <th>Year</th>
            <th>PT Population</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>2010</td>
            <td>10676</td>
          </tr>
          <tr>
            <td>2011</td>
            <td>10690</td>
          </tr>
          <tr>
            <td>2012</td>
            <td>10699</td>
          </tr>
          <tr>
            <td>2013</td>
            <td>10705</td>
          </tr>
          <tr>
            <td>2014</td>
            <td>10705</td>
          </tr>
          <tr>
            <td>2015</td>
            <td>10702</td>
          </tr>
          <tr>
            <td>2016</td>
            <td>10694</td>
          </tr>
          <tr>
            <td>2017</td>
            <td>10681</td>
          </tr>
          <tr>
            <td>2018</td>
            <td>10665</td>
          </tr>
          <tr>
            <td>2019</td>
            <td>10646</td>
          </tr>
          <tr>
            <td>2020</td>
            <td>10623</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
<script type='text/javascript'>
  //<![CDATA[
    jQuery("#tabs").tabs();
    
    jQuery(".container table").css({
      "color": "#3E576F",
      "cellspacing": "1"
    });
    
    jQuery(".container td").css({
      "padding": "0.3em",
      "vertical-align": "middle"
    })
    
    jQuery(".container thead th").css({
      "border-bottom": "1px solid #ccc"
    });
    
    jQuery('#ptpopulation').tablesorter();
    jQuery('#ptpopulation').attr({'cellspacing': "1", 'cellpadding': '0'})
  //]]>
</script>
 #+END_HTML

See mydashboard.rb & mydashboard.haml for the code of the dashboard above.

Features and Details:
 - Uses http://www.highcharts.com/ as the charting engine
 - Requires jQuery
 - Example uses Haml for building output html, but you can use other template engines.
 - Includes simple(& multivariate) linear regression for visualizing trends.
 - Supports posting to a Confluence wiki.
 - Supports fetching of email attachments/content as data sources.

Its not meant to be a complete fully featured lib for building html dashboards, but more as a starting point for your own custom dashboards, so do Fork/Copy and build on it.

Posted about in: [[http://al3xandr3.github.com/2011/05/24/dashboards.html]]

